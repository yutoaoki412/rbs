<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç®¡ç†ç”»é¢ - RBSé™¸ä¸Šæ•™å®¤</title>
  <meta name="description" content="RBSé™¸ä¸Šæ•™å®¤ã®ç®¡ç†ç”»é¢">
  <meta name="robots" content="noindex, nofollow">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/admin.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../assets/images/rds-logo.png">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="page-admin">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="admin-header">
    <div class="header-left">
      <i class="fas fa-running admin-logo-icon"></i>
      <span class="admin-logo-text">RBSé™¸ä¸Šæ•™å®¤ ç®¡ç†ç”»é¢</span>
    </div>
    <div class="header-right">
      <div class="notification-settings">
        <button class="notification-toggle-btn" id="notification-toggle" 
                title="é€šçŸ¥è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆ" 
                data-action="toggle-notification-mode">
          <i class="fas fa-bell-slash"></i>
          <span class="toggle-text">é€šçŸ¥OFF</span>
        </button>
      </div>
      <div class="session-info" id="session-info">
        <i class="fas fa-clock"></i>
        <span id="session-remaining">åˆæœŸåŒ–ä¸­...</span>
      </div>
      <button class="logout-btn" data-action="logout" title="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ">
        <i class="fas fa-sign-out-alt"></i>
        ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
      </button>
    </div>
  </header>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="admin-container">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="admin-sidebar">
      <nav class="sidebar-nav">
        <div class="nav-item active" data-tab="dashboard" data-action="switch-tab">
          <i class="fas fa-chart-bar"></i>
          <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
        </div>
        <div class="nav-item" data-tab="news-management" data-action="switch-tab">
          <i class="fas fa-newspaper"></i>
          <span>è¨˜äº‹ç®¡ç†</span>
        </div>
        <div class="nav-item" data-tab="lesson-status" data-action="switch-tab">
          <i class="fas fa-calendar-check"></i>
          <span>ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³</span>
        </div>
        <div class="nav-item" data-tab="settings" data-action="switch-tab">
          <i class="fas fa-cog"></i>
          <span>è¨­å®š</span>
        </div>
      </nav>
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ -->
    <main class="admin-main">
      <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
      <section id="dashboard" class="admin-section active">
        <div class="section-header">
          <h1><i class="fas fa-chart-bar"></i> ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        </div>
        
        <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-newspaper"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="total-articles">0</div>
              <div class="stat-label">ç·è¨˜äº‹æ•°</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon published">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="published-articles">0</div>
              <div class="stat-label">å…¬é–‹æ¸ˆã¿</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon draft">
              <i class="fas fa-edit"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="draft-articles">0</div>
              <div class="stat-label">ä¸‹æ›¸ã</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon current-month">
              <i class="fas fa-calendar"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="current-month-articles">0</div>
              <div class="stat-label">ä»Šæœˆã®è¨˜äº‹</div>
            </div>
          </div>
        </div>

        <!-- æœ€è¿‘ã®è¨˜äº‹ -->
        <div class="dashboard-widgets">
          <div class="widget">
            <div class="widget-header">
              <h2><i class="fas fa-newspaper"></i> æœ€è¿‘ã®è¨˜äº‹</h2>
              <div class="widget-header-actions">
                <button class="btn-icon" data-action="refresh-recent-articles" title="æ›´æ–°">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
            <div class="widget-content">
              <div id="recent-articles">
                <div class="loading-state">
                  <i class="fas fa-spinner fa-spin"></i>
                  è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...
                </div>
              </div>
            </div>
          </div>

          <!-- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
          <div class="widget quick-actions">
            <div class="widget-header">
              <h2><i class="fas fa-bolt"></i> ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h2>
            </div>
            <div class="widget-content">
              <div class="action-buttons">
                <button class="action-btn primary" data-action="new-news-article">
                  <i class="fas fa-plus"></i>
                  æ–°ã—ã„è¨˜äº‹ã‚’ä½œæˆ
                </button>
                <button class="action-btn success" data-action="switch-tab" data-tab="lesson-status">
                  <i class="fas fa-calendar-check"></i>
                  ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³ã‚’æ›´æ–°
                </button>
                <button class="action-btn secondary" data-action="open-external" data-url="index.html">
                  <i class="fas fa-external-link-alt"></i>
                  ã‚µã‚¤ãƒˆã‚’ç¢ºèª
                </button>
                <button class="action-btn info" data-action="open-external" data-url="news.html">
                  <i class="fas fa-newspaper"></i>
                  ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§ã‚’ç¢ºèª
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- è¨˜äº‹ç®¡ç† -->
      <section id="news-management" class="admin-section">
        <div class="section-header">
          <h1><i class="fas fa-newspaper"></i> è¨˜äº‹ç®¡ç†</h1>
        </div>
        
        <!-- è¨˜äº‹ç®¡ç†ç”¨ã®ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="sub-nav">
          <div class="sub-nav-item active" data-action="switch-news-tab" data-tab="editor">
            <i class="fas fa-edit"></i>
            æ–°è¦è¨˜äº‹ä½œæˆ
          </div>
          <div class="sub-nav-item" data-action="switch-news-tab" data-tab="list">
            <i class="fas fa-list"></i>
            è¨˜äº‹ä¸€è¦§
          </div>
        </div>
        
        <!-- ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚¿ãƒ– -->
        <div id="news-editor-tab" class="news-tab-content active">
          <div class="editor-panel">
            <div class="panel-header">
              <h2><i class="fas fa-edit"></i> <span id="editor-title">æ–°è¦è¨˜äº‹ä½œæˆ</span></h2>
              <div class="panel-actions">
                <button class="btn btn-outline" data-action="clear-news-editor">
                  ã‚¯ãƒªã‚¢
                </button>
                <button class="btn btn-secondary" data-action="preview-news">
                  <i class="fas fa-eye"></i>
                  ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
                </button>
                <button class="btn btn-primary" data-action="save-news">
                  <i class="fas fa-save"></i>
                  ä¿å­˜
                </button>
                <button class="btn btn-success" data-action="publish-news">
                  <i class="fas fa-globe"></i>
                  å…¬é–‹
                </button>
              </div>
            </div>
            
            <form class="editor-form">
              <input type="hidden" id="news-id">
              
              <div class="form-grid">
                <div class="form-group">
                  <label for="news-title">
                    ã‚¿ã‚¤ãƒˆãƒ« <span class="required">*</span>
                  </label>
                  <input type="text" id="news-title" class="form-input" placeholder="è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required>
                </div>
                <div class="form-group">
                  <label for="news-category">
                    ã‚«ãƒ†ã‚´ãƒªãƒ¼
                  </label>
                  <select id="news-category" class="form-select">
                    <option value="announcement">ãŠçŸ¥ã‚‰ã›</option>
                    <option value="event">ä½“é¨“ä¼š</option>
                    <option value="media">ãƒ¡ãƒ‡ã‚£ã‚¢</option>
                    <option value="important">é‡è¦</option>
                  </select>
                </div>
              </div>
              
              <div class="form-grid">
                <div class="form-group">
                  <label for="news-date">
                    å…¬é–‹æ—¥
                  </label>
                  <input type="date" id="news-date" class="form-input">
                </div>
                <div class="form-group">
                  <label for="news-status">
                    ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                  </label>
                  <select id="news-status" class="form-select">
                    <option value="draft">ä¸‹æ›¸ã</option>
                    <option value="published">å…¬é–‹</option>
                  </select>
                </div>
              </div>
              
              <div class="form-group">
                <label for="news-summary">
                  æ¦‚è¦
                </label>
                <textarea id="news-summary" class="form-textarea" rows="3" placeholder="è¨˜äº‹ã®æ¦‚è¦ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆè¨˜äº‹ä¸€è¦§ã§è¡¨ç¤ºã•ã‚Œã¾ã™ï¼‰"></textarea>
              </div>
              
              <div class="form-group">
                <label for="news-content">
                  æœ¬æ–‡ <span class="required">*</span>
                </label>
                <div class="editor-toolbar">
                  <button type="button" class="toolbar-btn" data-action="insert-markdown" data-start="**" data-end="**" title="å¤ªå­—">
                    <strong>B</strong>
                  </button>
                  <button type="button" class="toolbar-btn" data-action="insert-markdown" data-start="## " data-end="" title="è¦‹å‡ºã—">
                    H2
                  </button>
                  <button type="button" class="toolbar-btn" data-action="insert-markdown" data-start="- " data-end="" title="ãƒªã‚¹ãƒˆ">
                    List
                  </button>
                  <button type="button" class="toolbar-btn" data-action="insert-markdown" data-start="[" data-end="](URL)" title="ãƒªãƒ³ã‚¯">
                    Link
                  </button>
                  <div class="toolbar-separator"></div>
                  <button type="button" class="toolbar-btn help-btn" data-action="show-writing-guide" title="è¨˜äº‹ä½œæˆã‚¬ã‚¤ãƒ‰">
                    <i class="fas fa-question-circle"></i>
                    ã‚¬ã‚¤ãƒ‰
                  </button>
                </div>
                <textarea id="news-content" class="form-textarea editor-content" placeholder="è¨˜äº‹ã®æœ¬æ–‡ã‚’Markdownå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                <div class="form-help">
                  <small>Markdownè¨˜æ³•: **å¤ªå­—**ã€## è¦‹å‡ºã—ã€- ãƒªã‚¹ãƒˆã€[ãƒªãƒ³ã‚¯](URL) | <a href="#" data-action="show-writing-guide" class="help-link">ğŸ“– è©³ç´°ãªè¨˜äº‹ä½œæˆã‚¬ã‚¤ãƒ‰ã‚’è¦‹ã‚‹</a></small>
                </div>
              </div>
              
              <div class="form-group">
                <label>
                  <input type="checkbox" id="news-featured"> æ³¨ç›®è¨˜äº‹ã¨ã—ã¦è¡¨ç¤ºã™ã‚‹
                </label>
              </div>
            </form>
          </div>
        </div>
        
        <!-- è¨˜äº‹ä¸€è¦§ã‚¿ãƒ– -->
        <div id="news-list-tab" class="news-tab-content">
          <div class="list-panel full-width">
            <div class="panel-header">
              <h2><i class="fas fa-list"></i> è¨˜äº‹ä¸€è¦§</h2>
              <div class="panel-filters">
                <select id="news-filter" class="form-select" data-action="filter-news-list" data-target="news-filter">
                  <option value="all">ã™ã¹ã¦</option>
                  <option value="published">å…¬é–‹ä¸­</option>
                  <option value="draft">ä¸‹æ›¸ã</option>
                </select>
                <button class="btn btn-outline" data-action="refresh-news-list">
                  æ›´æ–°
                </button>
              </div>
            </div>
            <div id="news-list" class="list-content">
              <!-- è¨˜äº‹ä¸€è¦§ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
              <div class="loading-state">
                è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³ -->
      <section id="lesson-status" class="admin-section">
        <div class="section-header">
          <h1><i class="fas fa-calendar-check"></i> ãƒ¬ãƒƒã‚¹ãƒ³é–‹å‚¬çŠ¶æ³</h1>
          <p class="section-description">æœ¬æ—¥ã®ãƒ¬ãƒƒã‚¹ãƒ³é–‹å‚¬çŠ¶æ³ã‚’è¨­å®šãƒ»ç®¡ç†ã§ãã¾ã™</p>
        </div>
        
        <!-- ã‚¹ãƒ†ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ -->
        <div class="lesson-status-wizard">
          <div class="wizard-steps">
            <div class="step active" data-step="1">
              <div class="step-number">1</div>
              <span>å…¨ä½“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</span>
            </div>
            <div class="step" data-step="2">
              <div class="step-number">2</div>
              <span>è©³ç´°è¨­å®š</span>
            </div>
            <div class="step" data-step="3">
              <div class="step-number">3</div>
              <span>ã‚³ãƒ¼ã‚¹åˆ¥è¨­å®š</span>
            </div>
          </div>
          
          <!-- ã‚¹ãƒ†ãƒƒãƒ—1: å…¨ä½“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
          <div class="wizard-content step-1 active">
            <div class="step-panel">
              <div class="step-header">
                <h3><i class="fas fa-broadcast-tower"></i> å…¨ä½“é–‹å‚¬ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h3>
                <p>ã™ã¹ã¦ã®ã‚³ãƒ¼ã‚¹ã«é©ç”¨ã•ã‚Œã‚‹åŸºæœ¬çš„ãªé–‹å‚¬çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
              </div>
              
              <div class="status-selector-grid">
                <label class="status-option scheduled" for="global-scheduled">
                  <input type="radio" id="global-scheduled" name="global-status" value="é€šå¸¸é–‹å‚¬" checked>
                  <div class="option-card">
                    <div class="option-icon">
                      <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="option-content">
                      <h4>é€šå¸¸é–‹å‚¬</h4>
                      <p>äºˆå®šé€šã‚Šå±‹å¤–ã§å®Ÿæ–½</p>
                    </div>
                    <div class="option-check">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                </label>
                
                <label class="status-option cancelled" for="global-cancelled">
                  <input type="radio" id="global-cancelled" name="global-status" value="ä¸­æ­¢">
                  <div class="option-card">
                    <div class="option-icon">
                      <i class="fas fa-times-circle"></i>
                    </div>
                    <div class="option-content">
                      <h4>ä¸­æ­¢</h4>
                      <p>æœ¬æ—¥ã¯é–‹å‚¬ä¸­æ­¢</p>
                    </div>
                    <div class="option-check">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                </label>
                
                <label class="status-option indoor" for="global-indoor">
                  <input type="radio" id="global-indoor" name="global-status" value="å®¤å†…é–‹å‚¬">
                  <div class="option-card">
                    <div class="option-icon">
                      <i class="fas fa-home"></i>
                    </div>
                    <div class="option-content">
                      <h4>å®¤å†…é–‹å‚¬</h4>
                      <p>å®¤å†…ã§å®Ÿæ–½ã—ã¾ã™</p>
                    </div>
                    <div class="option-check">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                </label>
                
                <label class="status-option postponed" for="global-postponed">
                  <input type="radio" id="global-postponed" name="global-status" value="å»¶æœŸ">
                  <div class="option-card">
                    <div class="option-icon">
                      <i class="fas fa-clock"></i>
                    </div>
                    <div class="option-content">
                      <h4>å»¶æœŸ</h4>
                      <p>åˆ¥æ—¥ç¨‹ã«å¤‰æ›´</p>
                    </div>
                    <div class="option-check">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                </label>
              </div>
            </div>
          </div>
          
          <!-- ã‚¹ãƒ†ãƒƒãƒ—2: è©³ç´°è¨­å®š -->
          <div class="wizard-content step-2">
            <div class="step-panel">
              <div class="step-header">
                <h3><i class="fas fa-cog"></i> è©³ç´°è¨­å®š</h3>
                <p>é–‹å‚¬æ—¥ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®šã—ã¦ãã ã•ã„</p>
              </div>
              
              <div class="detail-settings-grid">
                <div class="setting-card">
                  <div class="setting-header">
                    <i class="fas fa-calendar-alt"></i>
                    <h4>å¯¾è±¡æ—¥</h4>
                  </div>
                  <div class="setting-content">
                    <input type="date" id="lesson-date" class="date-input" value="">
                  </div>
                </div>
                
                <div class="setting-card full-width">
                  <div class="setting-header">
                    <i class="fas fa-comment-alt"></i>
                    <h4>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆä»»æ„ï¼‰</h4>
                  </div>
                  <div class="setting-content">
                    <textarea id="global-message" class="message-textarea" rows="3" placeholder="ä¾‹ï¼šé›¨å¤©ã®ãŸã‚å®¤å†…ã§å®Ÿæ–½ã„ãŸã—ã¾ã™ã€‚ä½“è‚²é¤¨ã‚·ãƒ¥ãƒ¼ã‚ºã‚’ãŠæŒã¡ãã ã•ã„ã€‚"></textarea>
                    <div class="textarea-help">
                      <small><i class="fas fa-info-circle"></i> ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã¾ã™</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- ã‚¹ãƒ†ãƒƒãƒ—3: ã‚³ãƒ¼ã‚¹åˆ¥è¨­å®š -->
          <div class="wizard-content step-3">
            <div class="step-panel">
              <div class="step-header">
                <h3><i class="fas fa-users"></i> ã‚³ãƒ¼ã‚¹åˆ¥è¨­å®š</h3>
                <p>å„ã‚³ãƒ¼ã‚¹ã®å€‹åˆ¥è¨­å®šï¼ˆå¿…è¦ã«å¿œã˜ã¦å…¨ä½“è¨­å®šã‹ã‚‰å¤‰æ›´ï¼‰</p>
              </div>
              
              <div class="courses-settings">
                <div class="course-setting-card">
                  <div class="course-setting-header">
                    <div class="course-info">
                      <h4>ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚³ãƒ¼ã‚¹</h4>
                      <span class="course-detail">å¹´é•·ã€œå°3å¯¾è±¡ / 17:00-17:50</span>
                    </div>
                    <div class="course-status-indicator">
                      <span class="status-badge scheduled">é€šå¸¸é–‹å‚¬</span>
                    </div>
                  </div>
                  
                  <div class="course-status-options">
                    <label class="mini-status-option">
                      <input type="radio" name="basic-lesson" value="é€šå¸¸é–‹å‚¬" checked>
                      <span class="option-text">
                        <i class="fas fa-check-circle"></i>
                        é€šå¸¸é–‹å‚¬
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="basic-lesson" value="ä¸­æ­¢">
                      <span class="option-text">
                        <i class="fas fa-times-circle"></i>
                        ä¸­æ­¢
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="basic-lesson" value="å®¤å†…é–‹å‚¬">
                      <span class="option-text">
                        <i class="fas fa-home"></i>
                        å®¤å†…é–‹å‚¬
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="basic-lesson" value="å»¶æœŸ">
                      <span class="option-text">
                        <i class="fas fa-clock"></i>
                        å»¶æœŸ
                      </span>
                    </label>
                  </div>
                </div>
                
                <div class="course-setting-card">
                  <div class="course-setting-header">
                    <div class="course-info">
                      <h4>ã‚¢ãƒ‰ãƒãƒ³ã‚¹ã‚³ãƒ¼ã‚¹</h4>
                      <span class="course-detail">å°4ã€œå°6å¯¾è±¡ / 18:00-18:50</span>
                    </div>
                    <div class="course-status-indicator">
                      <span class="status-badge scheduled">é€šå¸¸é–‹å‚¬</span>
                    </div>
                  </div>
                  
                  <div class="course-status-options">
                    <label class="mini-status-option">
                      <input type="radio" name="advance-lesson" value="é€šå¸¸é–‹å‚¬" checked>
                      <span class="option-text">
                        <i class="fas fa-check-circle"></i>
                        é€šå¸¸é–‹å‚¬
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="advance-lesson" value="ä¸­æ­¢">
                      <span class="option-text">
                        <i class="fas fa-times-circle"></i>
                        ä¸­æ­¢
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="advance-lesson" value="å®¤å†…é–‹å‚¬">
                      <span class="option-text">
                        <i class="fas fa-home"></i>
                        å®¤å†…é–‹å‚¬
                      </span>
                    </label>
                    <label class="mini-status-option">
                      <input type="radio" name="advance-lesson" value="å»¶æœŸ">
                      <span class="option-text">
                        <i class="fas fa-clock"></i>
                        å»¶æœŸ
                      </span>
                    </label>
                  </div>
                </div>
              </div>
              
              <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
              <div class="course-preview-actions">
                <button class="btn btn-outline" id="show-preview-btn">
                  <i class="fas fa-eye"></i>
                  ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
                </button>
              </div>
            </div>
          </div>
          
          <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
          <div class="wizard-actions">
            <div class="nav-buttons">
              <button class="btn btn-outline wizard-prev" disabled>
                <i class="fas fa-chevron-left"></i>
                å‰ã¸
              </button>
              <button class="btn btn-primary wizard-next">
                æ¬¡ã¸
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            
            <div class="action-buttons">
              <button class="btn btn-outline" data-action="load-lesson-status">
                <i class="fas fa-download"></i>
                ç¾åœ¨ã®çŠ¶æ³ã‚’èª­ã¿è¾¼ã¿
              </button>
              <button class="btn btn-success" data-action="update-lesson-status">
                <i class="fas fa-save"></i>
                ä¿å­˜ã—ã¦å…¬é–‹
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- è¨­å®š -->
      <section id="settings" class="admin-section">
        <div class="section-header">
          <h1><i class="fas fa-cog"></i> è¨­å®š</h1>
        </div>
        
        <div class="settings-panel">
          <div class="setting-group">
            <h3><i class="fas fa-database"></i> ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
            <p>è¨˜äº‹ã€InstagramæŠ•ç¨¿ã€ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆç®¡ç†ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</p>
            <div class="setting-actions">
              <button class="btn btn-outline" data-action="export-data">
                <i class="fas fa-download"></i> å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
              </button>
              <button class="btn btn-outline" data-action="clear-all-data">
                <i class="fas fa-trash"></i> å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
              </button>
            </div>
            <small class="setting-note">
              <i class="fas fa-info-circle"></i>
              ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ãŒæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚
            </small>
          </div>
          
          <div class="setting-group">
            <h3><i class="fas fa-link"></i> ã‚µã‚¤ãƒˆé€£æº</h3>
            <p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µã‚¤ãƒˆã¨ã®é€£æºçŠ¶æ³</p>
            <div class="setting-actions">
              <button class="btn btn-primary" data-action="test-site-connection">
                <i class="fas fa-link"></i> é€£æºãƒ†ã‚¹ãƒˆ
              </button>
              <div id="site-connection-test-results" class="test-results" style="margin-top: 10px;"></div>
              <button class="btn btn-secondary" data-action="open-external" data-url="news.html">
                <i class="fas fa-external-link-alt"></i> ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ã‚’é–‹ã
              </button>
            </div>
          </div>
          
          <div class="setting-group">
            <h3><i class="fas fa-tools"></i> é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«</h3>
            <p>é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯éè¡¨ç¤ºï¼‰</p>
            <div class="setting-actions">
              <button class="btn btn-info" data-action="show-debug-info">
                <i class="fas fa-info-circle"></i> ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±è¡¨ç¤º
              </button>
              <button class="btn btn-info" data-action="show-news-debug">
                <i class="fas fa-bug"></i> ãƒ‹ãƒ¥ãƒ¼ã‚¹é€£æºãƒ‡ãƒãƒƒã‚°
              </button>
              <button class="btn btn-warning" data-action="reset-local-storage">
                <i class="fas fa-redo"></i> LocalStorage ãƒªã‚»ãƒƒãƒˆ
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modal-title"></h3>
        <button class="modal-close" data-action="close-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
      </div>
    </div>
  </div>

  <!-- é€šçŸ¥ã‚¨ãƒªã‚¢ -->
  <div id="notification-container" class="notification-container">
    <!-- é€šçŸ¥ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
  </div>

  <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ– -->
  <script type="module">
    import { app } from '../js/core/Application.js';
    
    // æ¨™æº–çš„ãªApplication.jsã‚’ä½¿ã£ãŸåˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        console.log('ğŸš€ RBSç®¡ç†ç”»é¢ - ApplicationåˆæœŸåŒ–é–‹å§‹');
        await app.init();
        console.log('âœ… RBSç®¡ç†ç”»é¢ - ApplicationåˆæœŸåŒ–å®Œäº†');
      } catch (error) {
        console.error('âŒ ApplicationåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
        
        // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
        const shouldRedirect = confirm(
          `ç®¡ç†ç”»é¢ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nã‚¨ãƒ©ãƒ¼: ${error.message}\n\nãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ`
        );
        if (shouldRedirect) {
          window.location.href = 'admin-login.html';
        }
      }
    });
  </script>

  <!-- é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ãƒ‘ãƒ¼ -->
  <script>
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é€šçŸ¥ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    window.showNotification = function(type, message, duration = 4000, options = {}) {
      if (window.uiManagerService) {
        return window.uiManagerService.showNotification(type, message, duration, options);
      } else {
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚·ãƒ³ãƒ—ãƒ«ãªé€šçŸ¥
        console.log(`${type.toUpperCase()}: ${message}`);
        
        // ç°¡æ˜“é€šçŸ¥è¦ç´ ã‚’ä½œæˆ
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 80px;
          right: 24px;
          padding: 16px 20px;
          border-radius: 12px;
          color: white;
          font-weight: 600;
          z-index: 9999;
          max-width: 400px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
          background: ${type === 'success' ? '#22c55e' : 
                      type === 'error' ? '#ef4444' : 
                      type === 'warning' ? '#f59e0b' : '#3b82f6'};
          transform: translateX(100%);
          transition: all 0.3s ease;
        `;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
        }, 10);
        
        // è‡ªå‹•å‰Šé™¤
        setTimeout(() => {
          notification.style.transform = 'translateX(100%)';
          setTimeout(() => {
            if (notification.parentNode) {
              notification.remove();
            }
          }, 300);
        }, duration);
      }
    };
    
    // ä¾¿åˆ©ãªãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    window.showSuccess = (message, duration, options) => 
      window.showNotification('success', message, duration, options);
    
    window.showError = (message, duration, options) => 
      window.showNotification('error', message, duration, options);
    
    window.showWarning = (message, duration, options) => 
      window.showNotification('warning', message, duration, options);
    
    window.showInfo = (message, duration, options) => 
      window.showNotification('info', message, duration, options);
    
    // ActionManager ã‚¢ã‚¯ã‚»ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼
    window.registerAction = function(actionName, handler) {
      if (window.app && window.app.actionManager) {
        window.app.actionManager.register(actionName, handler);
        console.log(`âœ… ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ç™»éŒ²: ${actionName}`);
      } else {
        console.warn(`âš ï¸ ActionManagerãŒåˆ©ç”¨ã§ãã¾ã›ã‚“: ${actionName}`);
      }
    };
    
    // ãƒ‡ãƒãƒƒã‚°ç”¨: ç™»éŒ²æ¸ˆã¿ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§è¡¨ç¤º
    window.listActions = function() {
      if (window.app && window.app.actionManager) {
        console.log('ğŸ“‹ ç™»éŒ²æ¸ˆã¿ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:', Array.from(window.app.actionManager._actions.keys()));
      } else {
        console.warn('âš ï¸ ActionManagerãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
      }
    };
    
    // console.logã‚’é€šçŸ¥ã§ã‚‚è¡¨ç¤ºã™ã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã¿ï¼‰
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
      const originalLog = console.log;
      const originalWarn = console.warn;
      const originalError = console.error;
      
      // ç®¡ç†ç”»é¢ã§ã®é‡è¦ãªãƒ­ã‚°ã®ã¿é€šçŸ¥ã¨ã—ã¦è¡¨ç¤º
      console.log = function(...args) {
        originalLog.apply(console, args);
        
        const message = args.join(' ');
        if (message.includes('âœ…') && message.length < 100 && !message.includes('ActionManager')) {
          window.showSuccess(message.replace(/âœ…|ğŸ¯|ğŸ“±|ğŸ”§/g, '').trim(), 2000);
        }
      };
      
      console.warn = function(...args) {
        originalWarn.apply(console, args);
        
        const message = args.join(' ');
        if (message.includes('âš ï¸') && message.length < 100 && !message.includes('æœªç™»éŒ²')) {
          window.showWarning(message.replace(/âš ï¸/g, '').trim(), 4000);
        }
      };
      
      console.error = function(...args) {
        originalError.apply(console, args);
        
        const message = args.join(' ');
        if (message.includes('âŒ') && message.length < 100) {
          window.showError(message.replace(/âŒ/g, '').trim(), 6000);
        }
      };
    }
  </script>

  <!-- ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³ãƒ•ã‚©ãƒ¼ãƒ ç”¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ—¥ä»˜è¨­å®š -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ—¥ä»˜è¨­å®š
      const lessonDateField = document.getElementById('lesson-date');
      if (lessonDateField && !lessonDateField.value) {
        lessonDateField.value = new Date().toISOString().slice(0, 10);
      }
      
      // ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
      let currentStep = 1;
      const maxSteps = 3;
      
      const steps = document.querySelectorAll('.step');
      const wizardContents = document.querySelectorAll('.wizard-content');
      const prevBtn = document.querySelector('.wizard-prev');
      const nextBtn = document.querySelector('.wizard-next');
      
      function updateStep(stepNumber) {
        // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®æ›´æ–°
        steps.forEach((step, index) => {
          const stepNum = index + 1;
          step.classList.toggle('active', stepNum === stepNumber);
          step.classList.toggle('completed', stepNum < stepNumber);
        });
        
        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ›´æ–°
        wizardContents.forEach((content, index) => {
          content.classList.toggle('active', index + 1 === stepNumber);
        });
        
        // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
        prevBtn.disabled = stepNumber === 1;
        if (stepNumber === maxSteps) {
          nextBtn.style.display = 'none';
        } else {
          nextBtn.style.display = 'flex';
        }
        
        currentStep = stepNumber;
      }
      
      // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
      if (prevBtn) {
        prevBtn.addEventListener('click', () => {
          if (currentStep > 1) {
            updateStep(currentStep - 1);
          }
        });
      }
      
      if (nextBtn) {
        nextBtn.addEventListener('click', () => {
          if (currentStep < maxSteps) {
            updateStep(currentStep + 1);
          }
        });
      }
      
      // ã‚¹ãƒ†ãƒƒãƒ—ã‚¯ãƒªãƒƒã‚¯ã§ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
      steps.forEach((step, index) => {
        step.addEventListener('click', () => {
          updateStep(index + 1);
        });
      });
    });
    
    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰
    function showPreviewModal() {
      console.log('ğŸ¯ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º');
      
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      
      if (!modal || !modalTitle || !modalBody) {
        console.error('âŒ ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
        return;
      }
      
      // å…¥åŠ›å€¤ã‚’å–å¾—
      const selectedStatus = document.querySelector('input[name="global-status"]:checked');
      const dateInput = document.getElementById('lesson-date');
      const messageInput = document.getElementById('global-message');
      const basicStatus = document.querySelector('input[name="basic-lesson"]:checked');
      const advanceStatus = document.querySelector('input[name="advance-lesson"]:checked');
      
      if (!selectedStatus) {
        alert('å…¨ä½“ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„');
        return;
      }
      
      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ãŸè¨­å®šã‚’å–å¾—
      const statusConfig = getStatusConfig(selectedStatus.value);
      
      // æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
      let dateText = 'æ—¥ä»˜æœªè¨­å®š';
      if (dateInput && dateInput.value) {
        const date = new Date(dateInput.value);
        dateText = date.toLocaleDateString('ja-JP', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'short'
        });
      }
      
      // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼HTMLã‚’ç”Ÿæˆ
      const previewHTML = generatePreviewHTML({
        status: statusConfig,
        dateText: dateText,
        message: messageInput ? messageInput.value : '',
        basicStatus: basicStatus ? basicStatus.value : 'é€šå¸¸é–‹å‚¬',
        advanceStatus: advanceStatus ? advanceStatus.value : 'é€šå¸¸é–‹å‚¬'
      });
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã«å†…å®¹ã‚’è¨­å®š
      modalTitle.innerHTML = '<i class="fas fa-eye"></i> ãƒ¬ãƒƒã‚¹ãƒ³çŠ¶æ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼';
      modalBody.innerHTML = previewHTML;
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
      modal.style.display = 'flex';
      modal.classList.add('show');
      
      console.log('âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºå®Œäº†');
    }
    
    function getStatusConfig(statusValue) {
      const configs = {
        'é€šå¸¸é–‹å‚¬': {
          text: 'é€šå¸¸é–‹å‚¬',
          icon: 'fas fa-check-circle',
          color: '#27ae60'
        },
        'ä¸­æ­¢': {
          text: 'ä¸­æ­¢',
          icon: 'fas fa-times-circle',
          color: '#e74c3c'
        },
        'å®¤å†…é–‹å‚¬': {
          text: 'å®¤å†…é–‹å‚¬',
          icon: 'fas fa-home',
          color: '#f39c12'
        },
        'å»¶æœŸ': {
          text: 'å»¶æœŸ',
          icon: 'fas fa-clock',
          color: '#9b59b6'
        }
      };
      
      return configs[statusValue] || configs['é€šå¸¸é–‹å‚¬'];
    }
    
    function generatePreviewHTML(data) {
      return `
        <div class="lesson-status-preview">
          <div class="preview-status-display">
            <div class="preview-icon" style="background: ${data.status.color};">
              <i class="${data.status.icon}"></i>
            </div>
            <div class="preview-text">
              <h4>${data.status.text}</h4>
              <p class="preview-date">${data.dateText}</p>
              ${data.message ? `<div class="preview-message">${data.message}</div>` : ''}
            </div>
          </div>
          
          <div class="preview-courses">
            <div class="preview-course">
              <span class="preview-course-name">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯</span>
              <span class="preview-course-status">${data.basicStatus}</span>
            </div>
            <div class="preview-course">
              <span class="preview-course-name">ã‚¢ãƒ‰ãƒãƒ³ã‚¹</span>
              <span class="preview-course-status">${data.advanceStatus}</span>
            </div>
          </div>
          
          <div class="preview-info">
            <p>
              <i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>
              ã“ã®å†…å®¹ãŒãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã¾ã™
            </p>
          </div>
        </div>
      `;
    }
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡
    function closeModal() {
      const modal = document.getElementById('modal');
      if (modal) {
        modal.style.display = 'none';
        modal.classList.remove('show');
      }
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
    document.addEventListener('DOMContentLoaded', function() {
      // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³
      const showPreviewBtn = document.getElementById('show-preview-btn');
      if (showPreviewBtn) {
        showPreviewBtn.addEventListener('click', showPreviewModal);
        console.log('âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šå®Œäº†');
      } else {
        console.warn('âš ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³
      const modalClose = document.querySelector('.modal-close');
      if (modalClose) {
        modalClose.addEventListener('click', closeModal);
      }
      
      // ãƒ¢ãƒ¼ãƒ€ãƒ«èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      const modal = document.getElementById('modal');
      if (modal) {
        modal.addEventListener('click', function(e) {
          if (e.target === modal) {
            closeModal();
          }
        });
      }
    });
  </script>
</body>
</html> 