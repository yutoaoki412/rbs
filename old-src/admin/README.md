# RBS陸上教室 管理画面システム

## 概要

RBS陸上教室のニュース記事を管理するための管理画面システムです。記事の作成、編集、削除、公開管理を簡単に行うことができます。

## 主な機能

### 🔐 認証システム
- パスワード認証によるセキュアなログイン
- セッション管理（24時間有効）
- ログイン試行回数制限（1時間に5回まで）
- 自動ログアウト（30分間非アクティブ時）
- セキュリティログ記録

### 📝 記事管理
- **記事作成**: Markdownエディターで新規記事作成
- **記事編集**: 既存記事の編集・更新
- **記事削除**: 不要な記事の削除
- **ステータス管理**: 下書き/公開の切り替え
- **記事複製**: 既存記事をベースに新規作成

### 📊 ダッシュボード
- 記事統計情報の表示
- カテゴリー別記事数
- 今月の投稿数
- 記事一覧表示（検索・フィルタリング機能付き）

### 🔧 その他の機能
- **一括操作**: 複数記事の一括公開/下書き化/削除
- **データエクスポート**: バックアップ用データ出力
- **データインポート**: バックアップからの復元
- **プレビュー機能**: 記事の表示確認
- **自動保存**: 30秒ごとの自動保存

## ファイル構成

```
admin/
├── index.html              # 管理画面ダッシュボード
├── login.html              # ログイン画面
├── editor.html             # 記事エディター
├── js/
│   ├── admin-auth.js       # 認証システム
│   ├── admin-manager.js    # 記事管理システム
│   ├── admin-dashboard.js  # ダッシュボード機能
│   ├── admin-editor.js     # エディター機能
│   └── admin-login.js      # ログイン機能
└── README.md               # このファイル
```

## 使い方

### 1. ログイン

1. `admin/login.html` にアクセス
2. パスワードを入力してログイン
   - **デフォルトパスワード**: `rbs2025admin`
   - ※ 実際の運用では必ず変更してください

### 2. ダッシュボード

ログイン後、管理画面のダッシュボードが表示されます。

#### 統計情報
- 総記事数、公開記事数、下書き記事数
- 今月の投稿数
- カテゴリー別記事数

#### 記事一覧
- 全記事の一覧表示
- 検索機能（タイトル、抜粋、カテゴリーで検索）
- カテゴリーフィルター
- ステータスフィルター（公開/下書き）

#### 記事操作
- **編集**: 記事タイトルをクリックまたは「編集」ボタン
- **複製**: 「複製」ボタンで記事をコピー
- **削除**: 「削除」ボタンで記事を削除
- **ステータス切り替え**: 「公開する」「下書きに戻す」ボタン
- **プレビュー**: 「プレビュー」ボタンで記事表示を確認

### 3. 記事作成・編集

#### 新規記事作成
1. ダッシュボードの「新規記事作成」ボタンをクリック
2. エディター画面で記事情報を入力

#### 記事編集
1. ダッシュボードで編集したい記事の「編集」ボタンをクリック
2. エディター画面で内容を修正

#### エディター機能

**メタデータ入力**
- **タイトル**: 記事のタイトル
- **日付**: 記事の公開日
- **カテゴリー**: お知らせ/体験会/メディア/重要
- **抜粋**: 記事の要約（一覧ページで表示）
- **注目記事**: チェックすると注目記事として扱われる

**Markdownエディター**
- リアルタイムプレビュー機能
- Markdownツールバー（太字、見出し、リストなど）
- キーボードショートカット
  - `Ctrl+S`: 保存
  - `Ctrl+P`: プレビュー切り替え

**保存オプション**
- **下書き保存**: 下書きとして保存（非公開）
- **公開**: 即座に公開
- **自動保存**: 30秒ごとに自動で下書き保存

### 4. 一括操作

複数の記事を選択して一括操作が可能です。

1. 記事一覧でチェックボックスを選択
2. 「一括操作」ドロップダウンから操作を選択
   - **一括公開**: 選択した下書き記事を公開
   - **一括下書き化**: 選択した公開記事を下書きに戻す
   - **一括削除**: 選択した記事を削除

### 5. データ管理

#### バックアップ（エクスポート）
1. ダッシュボードの「データエクスポート」ボタンをクリック
2. JSONファイルがダウンロードされます

#### 復元（インポート）
1. ダッシュボードの「データインポート」ボタンをクリック
2. バックアップファイルを選択
3. 確認後、データが復元されます

## Markdown記法

記事本文では以下のMarkdown記法が使用できます：

```markdown
# 見出し1
## 見出し2
### 見出し3

**太字**
*斜体*

- リスト項目1
- リスト項目2

> 引用文

---
水平線
```

## セキュリティ

### パスワード管理
- デフォルトパスワード: `rbs2025admin`
- **重要**: 実際の運用では必ず変更してください
- パスワードは8文字以上を推奨

### セッション管理
- ログイン後24時間有効
- 30分間非アクティブで自動ログアウト
- ページ離脱時の自動セッション延長

### ログイン制限
- 1時間に5回までのログイン試行制限
- 制限に達した場合は1時間後に再試行可能

### セキュリティログ
- ログイン成功/失敗の記録
- 最新100件のログを保持
- 管理画面でログ確認可能

## データ保存

### LocalStorage使用
- 記事データ: `rbs_articles_data`
- 記事コンテンツ: `rbs_articles_content`
- セッション情報: `rbs_admin_session`
- セキュリティログ: `rbs_security_log`

### 既存データとの互換性
- 初回起動時に既存の `articles.json` から自動移行
- フロントエンドは管理画面のデータを優先して表示
- 既存のMarkdownファイルも引き続き利用可能

## トラブルシューティング

### ログインできない
1. パスワードが正しいか確認
2. ログイン試行制限に達していないか確認
3. ブラウザのLocalStorageが有効か確認

### 記事が表示されない
1. 記事のステータスが「公開」になっているか確認
2. ブラウザのキャッシュをクリア
3. LocalStorageのデータを確認

### データが消えた
1. バックアップファイルから復元
2. ブラウザの開発者ツールでLocalStorageを確認
3. 元の `articles.json` ファイルから再移行

### エディターが動作しない
1. JavaScriptエラーがないかブラウザの開発者ツールで確認
2. 必要なJSファイルが読み込まれているか確認
3. ブラウザを再読み込み

## 開発者向け情報

### カスタマイズ
- CSS変数でカラーテーマをカスタマイズ可能
- JavaScript クラスベースで機能を分離
- 新機能の追加が容易な設計

### API拡張
- `AdminManager` クラスで記事管理機能を拡張
- `AdminAuth` クラスで認証機能を拡張
- イベントベースの設計で機能追加が簡単

### セキュリティ強化
- パスワードハッシュ化の実装
- サーバーサイド認証の追加
- CSRF対策の実装

## 更新履歴

### v1.0.0 (2025-01-XX)
- 初回リリース
- 基本的な記事管理機能
- 認証システム
- Markdownエディター
- ダッシュボード機能

---

## サポート

ご質問やお困りのことがございましたら、開発チームまでお問い合わせください。 